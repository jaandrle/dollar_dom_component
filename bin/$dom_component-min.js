function init(e){"use strict";const t={empty:function(e){let t=e.childNodes.length;for(;t--;)e.removeChild(e.lastChild)},insertAfter:function(e,t){const{parentNode:n,nextSibling:r}=t;r?n.insertBefore(e,r):n.appendChild(e)},replace:function(e,n){t.insertAfter(n,e),e.remove()}},n=function(){let e={add:function(){return e},component:function(){return e},mount:n,update:r,ondestroy:o,share:{mount:n,update:r,destroy:function(){return e=null,null},ondestroy:o,isStatic:function(){return!0}}};return e;function n(e,n="childLast"){switch(n){case"replace":e.remove();break;case"replaceContent":t.empty(e)}return null}function r(){return!0}function o(){return!0}}();t.component=function(e,r,{mapUpdate:o}={}){if(void 0===e||"EMPTY"===e.toUpperCase())return n;let i=null,c=null,s=null,u=null;const l=document.createDocumentFragment();let a,f=[],d=0,p=[];let h={add:b,addText:function(e,t=0){O(t);const n=document.createTextNode(e);let r=f[d]=k().appendChild(n);return d+=1,Object.assign({oninit:function(e){return e(r),h}},h)},component:function({mount:e,update:t,isStatic:n},r=0){O(r),f[d]=e(k()),n()||(i||(i=N()),i.registerComponent(t));return d+=1,h},setShift:function(e=0){let t;e?p.splice(p.length+1+e):(t=p.pop(),p.push(t,t));return h},mount:m,update:C,ondestroy:v,share:{mount:m,update:C,destroy:y,ondestroy:v,isStatic:function(){return!i}}},g={getReference:function(e,t){return t},on:function(e,t,...n){return n.forEach(([t,n])=>e[t].apply(this,n)),e},oninit:function(e,t,n){return n(t),e},onmount:function(e,t,n){return s||(s=new Map),s.set(t,n),e},onupdate:function(e,n,r,o){return r?(i||(i=N()),t.assign(n,i.register(n,r,o)),e):e}};return b(e,r);function b(e,n,r=0){O(r),n=n||{};const o=document.createElement(e);d?f[d]=k().appendChild(o):a=f[0]=l.appendChild(o);let i=f[d];d+=1,t.assign(i,n);const c=Object.assign({},h);return c.getReference=g.getReference.bind(null,c,i),c.on=g.on.bind(null,c,i),c.oninit=g.oninit.bind(null,c,i),c.onmount=g.onmount.bind(null,c,i),c.onupdate=g.onupdate.bind(null,c,i),c}function m(e,n="childLast"){u&&u.disconnect();const r=!l.firstChild&&a?a:l;let o;switch(n){case"replace":t.replace(e,r),o=e.parentNode;break;case"replaceContent":t.empty(e),e.appendChild(r),o=e;break;case"before":e.parentNode.insertBefore(r,e),o=e.parentNode;break;case"after":t.insertAfter(r,e),o=e.parentNode;break;default:"childFirst"===n&&e.childNodes.length?e.insertBefore(r,e.childNodes[0]):e.appendChild(r),o=e}return(u=new MutationObserver(e=>e.forEach(function(e){if(!e.removedNodes||-1===Array.prototype.indexOf.call(e.removedNodes,a))return!1;y()}))).observe(o,{childList:!0,subtree:!0,attributes:!1,characterData:!1}),s&&(s.forEach(function(r,o){return t.assign(o,r.call(o,e,n))}),s=void 0),a}function y(){return c&&c.forEach(e=>e.call(a)),a&&(a.remove(),f=[]),u&&u.disconnect(),u=void 0,c=void 0,a=void 0,i=void 0,h=void 0,g=void 0,null}function v(e){return c||(c=new Set),c.add(e),h}function O(e){e?(p.splice(p.length+1+e),p[p.length-1]=d):p.push(d)}function k(){return f[p[p.length-2]]||l}function N(){const e={},n=[],r=new Map,i=new Map,c=new Map;let s=0;return{register:function(t,n,o){Object.assign(e,n);const s=l(r,t)+"_"+l(i,o),u=Object.keys(n);for(let e,t=0,n=u.length;t<n;t++)e=u[t],c.has(e)?c.get(e).push(s):c.set(e,[s]);return o.call(t,n)||{}},registerComponent:function(e){-1===n.indexOf(e)&&n.push(e)},update:function(s){const l="function"==typeof o?o(s):s;let a=!1;for(let e=0,t=n.length;e<t;e++)n[e](l)&&!a&&(a=!0);if(!c.size)return a;const f=Object.keys(l).filter(t=>c.has(t)&&e[t]!==l[t]),d=f.length;if(!d)return a;Object.assign(e,l);const p=[];for(let e,t=0;t<d;t++)for(let n,r=0,o=(e=c.get(f[t])).length;r<o;r++)n=e[r],-1===p.indexOf(n)&&p.push(n);for(let e=0,t=p.length;e<t;e++)h(p[e]);return!0;function h(n){const[o,c]=n.split("_").map(Number),s=r.get(o),l=i.get(c).call(s,e)||{};if(null===s.parentNode)return u(o,c,f);t.assign(s,l)}},getData:function(){return e},unregister:u};function u(e,t,n){let o=0;function s(t){return Number(t.split("_")[0])!==e}r.delete(e),c.forEach(function(e,r){if(-1===n.indexOf(r))return e.forEach(function(e){Number(e.split("_")[1])===t&&(o+=1)});1===e.length?c.delete(r):c.set(r,e.filter(s))}),o||i.delete(t)}function l(e,t){let n=-1;return e.forEach(function(e,r){-1===n&&e===t&&(n=r)}),-1!==n?n:(n=s++,e.set(n,t),n)}}function C(e){return!!i&&i.update("function"==typeof e?e(i.getData()):e)}},t.componentListener=function(e,...t){const n=["oninit","onmount","onupdate"],r=n.indexOf((/^on/g.test(e)?"":"on")+e);if(-1===r)throw new Error(`Unsupported event name '${e}'!`);return Object.freeze([n[r],t])},t.assign=function(e,...t){const n=Object.assign({},...t),r=Object.keys(n);for(let t,o,i=0,c=r.length;i<c;i++)if(void 0!==(o=n[t=r[i]]))switch(t){case"style":if("string"==typeof o)e.setAttribute("style",o);else for(let t,n=0,r=Object.keys(o),i=r.length;n<i;n++)t=r[n],e.style.setProperty(t,o[t]);break;case"style_vars":for(let t,n=0,r=Object.keys(o),i=r.length;n<i;n++)t=r[n],e.style.setProperty(t,o[t]);break;case"classList":if(!e[t].toggle)break;for(let t,n,r=0,i=Object.keys(o),c=i.length;r<c;r++)-1===(n=o[t=i[r]])?e.classList.toggle(t):e.classList.toggle(t,Boolean(n));break;case"dataset":for(let t,n=0,r=Object.keys(o),i=r.length;n<i;n++)t=r[n],e.dataset[t]=o[t];break;case"href":e.setAttribute(t,o);break;default:e[t]=o}else Reflect.has(e,t)&&Reflect.deleteProperty(e,t);return e},e.$dom=t}init(window);