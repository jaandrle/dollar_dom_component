<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <title>$dom.component — Examples</title>
    <script type="text/javascript" src="$dom_component.js?v=1.2.0"></script>
    <style>
        body{
            color: #eeeeee;
            background: #2b2b2b;
            padding: 0 0 1em 0;
        }
        a{
            color: #b8b8ff;
        }
        a:hover{
            color: white;
        }
        summary {
            cursor: pointer;
        }
        article{
            width: 80%;
            min-width: 75em;
            max-width: 85em;
            margin: auto;
        }
        h1, h2 {
            background: #222;
            border: 1px solid #222;
            padding: .5em;
            margin-left: -.5em;
        }
        h2:target {
            border-color: currentColor;
        }
        p{
            font-size: 1.1em;
        }
        .notes{
            margin-top: .25em;
            font-size: .75em;
        }
        input, button {
            background: rgba(0,0,0,1);
            border: 1px solid #97f497;
            color: #ffffff;
            padding: .25em .5em;
            margin: 0 0 .25em 0;
        }
        input:hover, button:hover, input:focus, button:focus {
            border-color: currentColor;
        }
        [contenteditable=""]{
            display: block;
            font-family: "Lucida Console", Monaco, monospace;
            font-size: .75em;
            line-height: 1.5em;
            font-weight: bold;
            white-space: break-spaces;
            padding: 1rem;
            margin-top: -.25rem;
            border: .25rem dotted #97f497;
            background: #222;
        }
        [contenteditable=""]:before{
            content: "JavaScript (editable):";
            padding-bottom: 1em;
            color: #97f497;
            font-weight: bold;
            display: block;
            font-size: .8rem;
        }
        style[contenteditable=""]:before{
            content: "CSS (editable)";
        }
        @media screen and (max-width: 640px){
            article{
                width: 90%;
                min-width: initial;
            }
            [contenteditable=""] {
                white-space: pre;
                overflow: scroll;
                border-right-style: outset;
            }
        }
        .output{
            padding: 1rem;
            margin: 0;
            border: .25rem dotted #f0e09a;
        }
        .output:before{
            content: "Output:";
            color: #f0e09a;
            font-weight: bold;
            display: block;
            padding-bottom: 1.5rem;
        }
        .example_red_color{ color: #ff9b9b; }
        .example_blue_color{ color: #36c7ff; }
    </style>
</head>
<body>
    <article>
        <h1>$dom.component — Examples</h1>
        <a href="https://github.com/jaandrle/dollar_dom_component">⇠ Go back to GitHub repository</a>
        <h2 id="heading_content">Content</h2>
        <ul class="content"></ul>
        <script>
            function onKeyup(script, id){
                const el= document.getElementById(id);
                $dom.empty(el);
                eval(script.textContent);
            }
        </script>
        
        
        <h2>Basic examples</h2>
        <details open="">
        <summary>Notes</summary>
            <p>This section shows some Javascripts basic, which are in fact used internally in this library.</p>
            <p>The last example shows very basic usage of this library.</p>
        </details>
        <details>
        <summary>Examples</summary>
            
            
            <p>Creating element with only Vanilla JavaScript:</p>
            <div class="output" id="example_element_001"></div>
            <script onkeyup="onKeyup(this, 'example_element_001')" contenteditable="">
            (function(element_id){
                //EXAMPLE START
            
                const p= document.createElement("P");
                p.textContent= "Simple paragraph";
                p.className= "example_red_color";
                document.getElementById(element_id).appendChild(p);
            
                //EXAMPLE END
            })("example_element_001");
            </script>
            <p class="notes"><a href="https://github.com/jaandrle/dollar_dom_component/blob/master/docs/examples.html#L134" target="_blank">View with highliting (link to source of this file)</a></p>
            
            
            <p>Creating element with only Vanilla JavaScript and <a href="https://github.com/jaandrle/dollar_dom_component/blob/master/docs/%24dom_component.md#module_jaaJSU..$dom.assign">$dom.assign</a>:</p>
            <div class="output" id="example_element_002"></div>
            <script onkeyup="onKeyup(this, 'example_element_002')" contenteditable="">
            (function(element_id){
                //EXAMPLE START
            
                const p= $dom.assign(document.createElement("P"), { textContent: "Simple paragraph", className: "example_red_color" });
                document.getElementById(element_id).appendChild(p);
            
                //EXAMPLE END
            })("example_element_002");
            </script>
            <p class="notes"><a href="https://github.com/jaandrle/dollar_dom_component/blob/master/docs/examples.html#L151" target="_blank">View with highliting (link to source of this file)</a></p>
            
            
            <p>Now, we use <a href="https://github.com/jaandrle/dollar_dom_component/blob/master/docs/%24dom_component.md#module_jaaJSU..$dom.component">$dom.component</a>:</p>
            <div class="output" id="example_element_003"></div>
            <script onkeyup="onKeyup(this, 'example_element_003')" contenteditable="">
            (function(element_id){
                //EXAMPLE START
            
                $dom.component("P", { textContent: "Simple paragraph", className: "example_red_color" })
                .mount(document.getElementById(element_id));
            
                //EXAMPLE END
            })("example_element_003");
            </script>
            <p class="notes"><a href="https://github.com/jaandrle/dollar_dom_component/blob/master/docs/examples.html#L166" target="_blank">View with highliting (link to source of this file)</a></p>
        </details>
        
        <h2>Basic components</h2>
        <details open="">
        <summary>Notes</summary>
            <p>This section shows some simple components created by this library.</p>
        </details>
        <details>
        <summary>Examples</summary>
            
            
            <p>The real benefit of <a href="https://github.com/jaandrle/dollar_dom_component/blob/master/docs/%24dom_component.md#module_jaaJSU..$dom.component">$dom.component</a>
                is to creating reusable components. It can be created by function scope, for expose internal
                API use <a href="https://github.com/jaandrle/dollar_dom_component/blob/master/docs/%24dom_component.md#module_jaaJSU..$dom..instance_component.share"><code>.share</code></a> namespace.
            </p>
            <div class="output" id="example_element_004"></div>
            <script onkeyup="onKeyup(this, 'example_element_004')" contenteditable="">
            (function(element_id){
                //EXAMPLE START
            
                const el= document.getElementById(element_id);
                paragraph("red").mount(el);
                paragraph("blue").mount(el);
            
                function paragraph(color){
                    return $dom.component("P", { textContent: "Simple paragraph", className: `example_${color}_color` })
                    .share;
                }
                
                //EXAMPLE END
            })("example_element_004");
            </script>
            <p class="notes"><a href="https://github.com/jaandrle/dollar_dom_component/blob/master/docs/examples.html#L193" target="_blank">View with highliting (link to source of this file)</a></p>
            
            
            <p><a href="https://github.com/jaandrle/dollar_dom_component/blob/master/docs/%24dom_component.md#module_jaaJSU..$dom.component">$dom.component</a> returns/provide methods such as <code>.add</code> for adding child element:</p>
            <div class="output" id="example_element_005"></div>
            <script onkeyup="onKeyup(this, 'example_element_005')" contenteditable="">
            (function(element_id){
                //EXAMPLE START
            
                const el= document.getElementById(element_id);
                paragraph("red").mount(el);
                paragraph("blue").mount(el);
            
                function paragraph(color){
                    const c= $dom.component("P", { textContent: "Simple paragraph with child: " });
                        c.add("STRONG", { textContent: "this is child", className: `example_${color}_color` });
                    return c.share;
                }
            
                //EXAMPLE END
            })("example_element_005");
            </script>
            <p class="notes"><a href="https://github.com/jaandrle/dollar_dom_component/blob/master/docs/examples.html#L214" target="_blank">View with highliting (link to source of this file)</a></p>
            
            
            <p>Default behaviour is, that all <code>.add(…)</code> are childs the previusly created element:</p>
            <div class="output" id="example_element_006"></div>
            <script onkeyup="onKeyup(this, 'example_element_006')" contenteditable="">
            (function(element_id){
                //EXAMPLE START
            
                const el= document.getElementById(element_id);
                paragraph("red").mount(el);
                paragraph("blue").mount(el);
            
                function paragraph(color){
                    const c= $dom.component("P", { textContent: "Simple paragraph with child: " });
                        c.add("SPAN", { textContent: "this is child", className: `example_${color}_color` });
                            c.add("STRONG", { textContent: " (child of child)", style: "font-weight: bold;" });
                    return c.share;
                }
            
                //EXAMPLE END
            })("example_element_006");
            </script>
            <p class="notes"><a href="https://github.com/jaandrle/dollar_dom_component/blob/master/docs/examples.html#L236" target="_blank">View with highliting (link to source of this file)</a></p>
            
            
            <p>For changin this nesting behaviour, you can use last argument:</p>
            <div class="output" id="example_element_007"></div>
            <script onkeyup="onKeyup(this, 'example_element_007')" contenteditable="">
            (function(element_id){
                //EXAMPLE START
            
                const el= document.getElementById(element_id);
                list("red").mount(el);
                list("blue").mount(el);
            
                function list(color){
                    const c= $dom.component("UL", { textContent: "PARENT_1" });
                        c.add("LI", { textContent: "Child of PARENT_1", className: `example_${color}_color` });
                        //we need shift one level up=> -1
                        c.add("LI", { textContent: "PARENT_2: Also child of PARENT_1" }, -1);
                            c.add("STRONG", { textContent: " // Child of PARENT_2", style: "font-weight: bold;" });
                        //we need shift two levels up=> -2
                        c.add("LI", { textContent: "Also child of PARENT_1" }, -2);
                    return c.share;
                }
            
                //EXAMPLE END
            })("example_element_007");
            </script>
            <p class="notes"><a href="https://github.com/jaandrle/dollar_dom_component/blob/master/docs/examples.html#L259" target="_blank">View with highliting (link to source of this file)</a></p>
            
            
            <p>All togeder:</p>
            <div class="output" id="example_element_008"></div>
            <script onkeyup="onKeyup(this, 'example_element_008')" contenteditable="">
            (function(element_id){
                //EXAMPLE START
            
                const el= document.getElementById(element_id);
                list("red").mount(el);
                list("blue").mount(el);
            
                function list(color){
                    const c= $dom.component("UL", null);
                        c.add("LI", { textContent: "First list item with another list:", className: `example_${color}_color` });
                            c.add("UL", null);
                                c.add("LI", { textContent: "Item 1.1" });
                                c.add("LI", { textContent: "Item 1.2" }, -1);
                        //we need shift three levels up=> -3
                        c.add("LI", { textContent: "Item 2: " }, -3);
                            c.add("STRONG", { textContent: "bold part", style: "font-weight: bold;" });
                            c.addText(".", -1);
                        //we need shift two levels up=> -2
                        c.add("LI", { textContent: "Item 3" }, -2);
                    return c.share;
                }
            
                //EXAMPLE END
            })("example_element_008");
            </script>
            <p class="notes"><a href="https://github.com/jaandrle/dollar_dom_component/blob/master/docs/examples.html#L286" target="_blank">View with highliting (link to source of this file)</a></p>
        </details>
        
        <h2>Syntax tips</h2>
        <details open="">
        <summary>Notes</summary>
            <p>This section shows some ways how to write components.</p>
        </details>
        <details>
        <summary>Examples</summary>
            
            
            <p>You can use JavaScript desctruturing syntax:</p>
            <div class="output" id="example_element_009"></div>
            <script onkeyup="onKeyup(this, 'example_element_009')" contenteditable="">
            (function(element_id){
                //EXAMPLE START
            
                const el= document.getElementById(element_id);
                paragraph({ textContent: "first", className: "example_red_color"}).mount(el);
                paragraph({ textContent: "second", className: "example_blue_color" }).mount(el);
            
                function paragraph({ textContent, className }){
                    const { add, share }= $dom.component("P", { textContent: "Test el: ", className });
                        add("STRONG", { textContent });
                    return share;
                }
                
                //EXAMPLE END
            })("example_element_009");
            </script>
            <p class="notes"><a href="https://github.com/jaandrle/dollar_dom_component/blob/master/docs/examples.html#L326" target="_blank">View with highliting (link to source of this file)</a></p>
            
            
            <p>You can change mount destination (see <a href="https://github.com/jaandrle/dollar_dom_component/blob/master/docs/%24dom_component.md#module_jaaJSU..$dom..instance_component.share.mount">.mount</a>):</p>
            <div class="output" id="example_element_010"></div>
            <script onkeyup="onKeyup(this, 'example_element_010')" contenteditable="">
            (function(element_id){
                //EXAMPLE START
            
                const paragraph_el= paragraph({ textContent: "first", className: "example_red_color"}).mount(document.getElementById(element_id));
                paragraph({ textContent: "second", className: "example_blue_color" }).mount(paragraph_el, "before");
            
                function paragraph({ textContent, className }){
                    const { add, share }= $dom.component("P", { textContent: "This is paragraph number: ", className });
                        add("STRONG", { textContent });
                    return share;
                }
                
                //EXAMPLE END
            })("example_element_010");
            </script>
            <p class="notes"><a href="https://github.com/jaandrle/dollar_dom_component/blob/master/docs/examples.html#L348" target="_blank">View with highliting (link to source of this file)</a></p>
        </details>
        
        <h2>Reactivity</h2>
        <details open="">
        <summary>Notes</summary>
            <p>This section shows some ways how to write reacive components.</p>
        </details>
        <details>
        <summary>Examples</summary>
            
            
            <p>You can define reactive behaviour:</p>
            <div class="output" id="example_element_011"></div>
            <script onkeyup="onKeyup(this, 'example_element_011')" contenteditable="">
            (function(element_id){
                //EXAMPLE START
            
                const container= document.getElementById(element_id);
            
                textInputComponent({ label_type: "name", placeholder: "Peter" }).mount(container);
                textInputComponent({ label_type: "surname", placeholder: "Black" }).mount(container);
            
                function textInputComponent(params){
                    const label_type= params.label_type || "name";
                    const default_listener_value= { listen_variable_name: " - " };
                    const c= $dom.component("DIV");
                        c.add("LABEL", { textContent: `Type your ${label_type}: ` });
                            c.add("INPUT", { type: "text", placeholder: params.placeholder, onkeyup: onkeyupHandler });
                        c.add("P", { textContent: `Your ${label_type} is: ` }, -2);
                            c.add("STRONG", null).onupdate(default_listener_value, onUpdateHandler);
                    return c.share;
            
                    function onkeyupHandler(){ c.update({ listen_variable_name: this.value }); }
                    function onUpdateHandler({ listen_variable_name }){ return { textContent: listen_variable_name }; }
                }
                
                //EXAMPLE END
            })("example_element_011");
            </script>
            <p class="notes"><a href="https://github.com/jaandrle/dollar_dom_component/blob/master/docs/examples.html#L378" target="_blank">View with highliting (link to source of this file)</a></p>
            
            
            <p>The same example with using JavaScript desctructuring syntax:</p>
            <div class="output" id="example_element_012"></div>
            <script onkeyup="onKeyup(this, 'example_element_012')" contenteditable="">
            (function(element_id){
                //EXAMPLE START
            
                const container= document.getElementById(element_id);
            
                textInputComponent({ label_type: "name", placeholder: "Peter" }).mount(container);
                textInputComponent({ label_type: "surname", placeholder: "Black" }).mount(container);
            
                function textInputComponent({ label_type= "name", placeholder }){
                    const { add, share, update }= $dom.component("DIV");
                        add("LABEL", { textContent: `Type your ${label_type}: ` });
                            add("INPUT", { type: "text", placeholder, onkeyup });
                        add("P", { textContent: `Your ${label_type} is: ` }, -2);
                            add("STRONG", null).onupdate({ textContent: " - " }, ({ textContent })=> ({ textContent }));
                    return share;
            
                    function onkeyup(){ update({ textContent: this.value }); }
                }
                
                //EXAMPLE END
            })("example_element_012");
            </script>
            <p class="notes"><a href="https://github.com/jaandrle/dollar_dom_component/blob/master/docs/examples.html#L409" target="_blank">View with highliting (link to source of this file)</a></p>
            
            
            <p>Counter:</p>
            <div class="output" id="example_element_013"></div>
            <script onkeyup="onKeyup(this, 'example_element_013')" contenteditable="">
            (function(element_id){
                //EXAMPLE START
            
                const container= document.getElementById(element_id);
            
                counterComponent({ textContent: "Your salary ($): ", step: 1000 }).mount(container);
                counterComponent({ textContent: "Number of yours socks: " }).mount(container);
            
                function counterComponent({ textContent, step= 1 }){
                    let sum= 0;
                    const { add, share, update }= $dom.component("DIV", { style: "padding-bottom: 1.5rem;" });
                        add("BUTTON", { textContent: "+", value: step, onclick });
                        add("BUTTON", { textContent: "–", value: -step, onclick }, -1);
                        add("P", { textContent }, -1);
                            add("STRONG", null).onupdate({ value: sum }, ({ value })=> ({ textContent: value }));
                    return share;
            
                    function onclick(){
                        sum+= Number(this.value);
                        update({ value: toOdd(sum) });
                    }
                    function toOdd(number){ return 2*number+1; }
                }
                
                //EXAMPLE END
            })("example_element_013");
            </script>
            <p class="notes"><a href="https://github.com/jaandrle/dollar_dom_component/blob/master/docs/examples.html#L437" target="_blank">View with highliting (link to source of this file)</a></p>
            
            
            <p>Method <code>.update</code> also accepts function returning object (it will be combinet with internal data with <code>Object.assign</code>):</p>
            <div class="output" id="example_element_014"></div>
            <script onkeyup="onKeyup(this, 'example_element_014')" contenteditable="">
            (function(element_id){
                //EXAMPLE START
            
                const container= document.getElementById(element_id);
            
                counterComponent({ textContent: "Your salary ($): " }).mount(container);
                counterComponent({ textContent: "Number of yours socks: " }).mount(container);
            
                function counterComponent({ textContent }){
                    const { add, share, update }= $dom.component("DIV", { style: "padding-bottom: 1.5rem;" });
                        add("BUTTON", { textContent: "+", onclick });
                        add("P", { textContent }, -1);
                            add("STRONG", null).onupdate({ value: 0 }, ({ value })=> ({ textContent: value }));
                    return share;
            
                    function onclick(){ update(({ value })=> ({ value: value+1 })); }
                }
                
                //EXAMPLE END
            })("example_element_014");
            </script>
            <p class="notes"><a href="https://github.com/jaandrle/dollar_dom_component/blob/master/docs/examples.html#L470" target="_blank">View with highliting (link to source of this file)</a></p>
            
            
            <p>Method <code>.update</code> is also avilable outside function scope (is included in <code>.share</code> namespace):</p>
            <div class="output" id="example_element_015"></div>
            <script onkeyup="onKeyup(this, 'example_element_015')" contenteditable="">
            (function(element_id){
                //EXAMPLE START
            
                const container= document.getElementById(element_id);
                const counter_component= counterComponent({ textContent: "Current loop (every 10secs add one): " });
                counter_component.mount(container);
                counter_component.ondestroy(timerEffect(counter_component.update, 10000));
            
                function counterComponent({ textContent }){
                    const { add, share, ondestroy, update }= $dom.component("P", { textContent }, -1);
                            add("STRONG", null).onupdate({ value: 0, animation: "" }, ({ value, animation })=> ({ textContent: value+" "+animation }));
                    
                    ondestroy(dotsAnimationEffect(update, 500));
                    return share;
                }
            
                function timerEffect(update, interval){
                    return clearInterval.bind(null, setInterval(update.bind(null, ({ value })=> ({ value: value+1 })), interval));
                }
                function dotsAnimationEffect(update, interval){
                    return clearInterval.bind(null, setInterval(update.bind(null, ({ animation })=> ({ animation: nextStep(animation) })), interval));
                    
                    function nextStep(current){
                        if(current===". . . ") return "";
                        return current+". ";
                    }
                }
                
                //EXAMPLE END
            })("example_element_015");
            </script>
            <p class="notes"><a href="https://github.com/jaandrle/dollar_dom_component/blob/master/docs/examples.html#L497" target="_blank">View with highliting (link to source of this file)</a></p>
        </details>
        
        <h2>Some additionals / advanced examples</h2>
        <details open="">
        <summary>Notes</summary>
            <p>This section shows some new ways how to write (reacive) components.</p>
        </details>
        <details>
        <summary>Examples</summary>
            
            
            <p>You can define listener outside function scope (see <a href="https://github.com/jaandrle/dollar_dom_component/blob/master/docs/%24dom_component.md#module_jaaJSU..$dom.componentListener"><code>$dom.componentListener</code></a>):</p>
            <div class="output" id="example_element_016"></div>
            <script onkeyup="onKeyup(this, 'example_element_016')" contenteditable="">
            (function(element_id){
                //EXAMPLE START
            
                const container= document.getElementById(element_id);
                const update_ChangeSum= $dom.componentListener("update", { sum: 0 }, ({ sum })=> ({ textContent: sum }));
                const update_ChangeColor= $dom.componentListener("update", { color: "blue" }, ({ color })=> ({ className: `example_${color}_color` }));
            
                counterComponent({ textContent: "Number of yours socks: " }).mount(container);
            
                function counterComponent({ textContent }){
                    const click_addOne= $dom.componentListener("click", function(){ this.update(({ sum })=> ({ sum: sum+1 })) });
                    
                    const { add, share, update }= $dom.component("DIV", null);
                        add("BUTTON", { textContent: "+" }).on(click_addOne);
                        add("BUTTON", { textContent: "red", onclick: setColor }, -1);
                        add("BUTTON", { textContent: "blue", onclick: setColor }, -1);
                        add("P", { textContent }, -1);
                            add("STRONG", null).on(update_ChangeSum, update_ChangeColor);
                    return share;
            
                    function setColor(){ update({ color: this.textContent }); }
                }
                
                //EXAMPLE END
            })("example_element_016");
            </script>
            <p class="notes"><a href="https://github.com/jaandrle/dollar_dom_component/blob/master/docs/examples.html#L543" target="_blank">View with highliting (link to source of this file)</a></p>
            
            
            <p>You can use another component inside current one (see <a href="https://github.com/jaandrle/dollar_dom_component/blob/master/docs/%24dom_component.md#module_jaaJSU..$dom..instance_component.component"><code>.component</code></a>):</p>
            <div class="output" id="example_element_017"></div>
            <script onkeyup="onKeyup(this, 'example_element_017')" contenteditable="">
            (function(element_id){
                //EXAMPLE START
            
                const container= document.getElementById(element_id);
                const sum_updated= $dom.componentListener("update", { sum: 0 }, ({ sum })=> ({ value: sum }));
            
                pseudoFormComponent({ user_name: "Adam", stuff_arr: [ "socks", "legs" ], color: "red" }).mount(container);
                pseudoFormComponent({ user_name: "Eva", stuff_arr: [ "socks", "hands" ] }).mount(container);
            
                function pseudoFormComponent({ user_name, stuff_arr= [ "socks" ], color }= {}){
                    user_name= user_name ? user_name+"’s" : "yours";
                    const color_setup= !color ? null : { className: `example_${color}_color` };
            
                    const { add, addText, component, update, setShift, share }=
                    $dom.component("DIV", Object.assign({ textContent: "Form:" }, color_setup));
                        setShift(0); //(*) you can imagine this as phantom element which is now child, so in loop ve add siblings=> -1
                    for(let i=0, i_length= stuff_arr.length; i<i_length; i++){
                        component(counterComponent({ textContent: `Number of ${user_name} ${stuff_arr[i]}: `, onchange }), -1);
                    }
                        add("P", null, -1);
                            add("SPAN", null).onupdate({ sum_main: 0 }, ({ sum_main })=> ({ textContent: ` Last given number: ${sum_main}` }))
                            addText(" (", -1);
                            add("A", { textContent: "reset", style: "cursor: pointer;", onclick }, -1);
                            addText(").", -1);
                    return share;
                    
                    //of course, in real life we nead mor info
                    function onchange(sum_main){ update({ sum_main }); }
                    //!!! see, `sum` event name is shared with sub-components
                    function onclick(){ update({ sum: 0, sum_main: 0 }); }
                }
            
                function counterComponent({ textContent, onchange: onchangeCallback }){
                    const { add, addText, share, update }= $dom.component("P", null);
                        add("LABEL", { textContent });
                            add("INPUT", { type: "number", onchange }, -1).on(sum_updated);
                            add("BUTTON", { textContent: "+", value: 1, onclick }, -1);
                            addText(" ", -1);
                            //of course, instead of `style` you schould use `className` in production code!
                            add("BUTTON", { textContent: "–", value: -1, onclick, style: "padding: .25em .575em;" }, -1);
                    return share;
            
                    function onclick(){
                        let sum= Number(this.value);
                        update(function({ sum: old_sum }){
                            sum+= old_sum;
                            onchangeCallback(sum);
                            return { sum };
                        });
                    }
                    function onchange(){
                        const sum= Number(this.value);
                        onchangeCallback(sum);
                        update({ sum });
                    }
                }
                
                //EXAMPLE END
            })("example_element_017");
            </script>
            <p class="notes"><a href="https://github.com/jaandrle/dollar_dom_component/blob/master/docs/examples.html#L575" target="_blank">View with highliting (link to source of this file)</a></p>
            
            
            <p>As previou with different usuage of <a href="https://github.com/jaandrle/dollar_dom_component/blob/master/bin/$dom_component.js#L485"><code>setShift</code></a>:</p>
            <div class="output" id="example_element_018"></div>
            <script onkeyup="onKeyup(this, 'example_element_018')" contenteditable="">
            (function(element_id){
                //EXAMPLE START
            
                const container= document.getElementById(element_id);
                const sum_updated= $dom.componentListener("update", { sum: 0 }, ({ sum })=> ({ value: sum }));
            
                pseudoFormComponent({ user_name: "Adam", stuff_arr: [ "socks", "legs" ], color: "red" }).mount(container);
                pseudoFormComponent({ user_name: "Eva", stuff_arr: [ "socks", "hands" ] }).mount(container);
            
                function pseudoFormComponent({ user_name, stuff_arr= [ "socks" ], color }= {}){
                    user_name= user_name ? user_name+"’s" : "yours";
                    const color_setup= !color ? null : { className: `example_${color}_color` };
            
                    const { add, addText, component, update, setShift, share }=
                    $dom.component("DIV", Object.assign({ textContent: "Form:" }, color_setup));
                    for(let i=0, i_length= stuff_arr.length; i<i_length; i++){
                        component(counterComponent({ textContent: `Number of ${user_name} ${stuff_arr[i]}: `, onchange })); //(*)
                    setShift(-2); //(*) we can add ne phantom parent and using=> 0 in last argument
                    }
                        add("P", null); //(*)
                            add("SPAN", null).onupdate({ sum_main: 0 }, ({ sum_main })=> ({ textContent: ` Last given number: ${sum_main}` }))
                            addText(" (", -1);
                            add("A", { textContent: "reset", style: "cursor: pointer;", onclick }, -1);
                            addText(").", -1);
                    return share;
                    
                    //of course, in real life we nead mor info
                    function onchange(sum_main){ update({ sum_main }); }
                    //!!! see, `sum` event name is shared with sub-components
                    function onclick(){ update({ sum: 0, sum_main: 0 }); }
                }
            
                function counterComponent({ textContent, onchange: onchangeCallback }){
                    const { add, addText, share, update }= $dom.component("P", null);
                        add("LABEL", { textContent });
                            add("INPUT", { type: "number", onchange }, -1).on(sum_updated);
                            add("BUTTON", { textContent: "+", value: 1, onclick }, -1);
                            addText(" ", -1);
                            //of course, instead of `style` you schould use `className` in production code!
                            add("BUTTON", { textContent: "–", value: -1, onclick, style: "padding: .25em .575em;" }, -1);
                    return share;
            
                    function onclick(){
                        let sum= Number(this.value);
                        update(function({ sum: old_sum }){
                            sum+= old_sum;
                            onchangeCallback(sum);
                            return { sum };
                        });
                    }
                    function onchange(){
                        const sum= Number(this.value);
                        onchangeCallback(sum);
                        update({ sum });
                    }
                }
                
                //EXAMPLE END
            })("example_element_018");
            </script>
            <p class="notes"><a href="https://github.com/jaandrle/dollar_dom_component/blob/master/docs/examples.html#L641" target="_blank">View with highliting (link to source of this file)</a></p>
            
            
            <p>As previou with different usuage of <a href="https://github.com/jaandrle/dollar_dom_component/blob/master/bin/$dom_component.js#L485"><code>setShift</code></a>:</p>
            <div class="output" id="example_element_019"></div>
            <script onkeyup="onKeyup(this, 'example_element_019')" contenteditable="">
            (function(element_id){
                //EXAMPLE START
            
                const container= document.getElementById(element_id);
                mainComponent({ textContent: "`dynamicComponent` example: " }).mount(container);
            
                function mainComponent({ textContent }){
                    const { add, addText, update, dynamicComponent, share }= $dom.component("DIV");
                        add("P", { textContent });
                            dynamicComponent({ text: "–" }, function(use, prev_component, { text: textContent }, shared_value){
                                /* use: component mounter, prev_component: previously mounted component, data (see onupdate), shared_value: value setted by return of this function */
                                /* initial component */
                                if(!prev_component){
                                    use($dom.component("SPAN", { textContent }).share);
                                    return 1;
                                }
                                /* dynamic part */
                                if(shared_value===1) use(spec_text({ textContent }));
                                else prev_component.update({ shared_text: `(update only – ${shared_value-1}×)` });
            
                                return ++shared_value;
                            });
                            addText(".", -1);
                        add("BUTTON", { textContent: "text1", onclick }, -2);
                        add("BUTTON", { textContent: "text2", onclick }, -1);
                    return share;
            
                    function onclick(){ update({ text: this.textContent }); }
                }
                function spec_text({ textContent }){
                    const { share }= $dom.component("STRONG")
                        .onupdate({ shared_text: "" }, ({ shared_text })=> ({ textContent: textContent+(shared_text?" "+shared_text:shared_text) }));
                    return share;
                }
                
                //EXAMPLE END
            })("example_element_019");
            </script>
            <p class="notes"><a href="https://github.com/jaandrle/dollar_dom_component/blob/master/docs/examples.html#L707" target="_blank">View with highliting (link to source of this file)</a></p>
        </details>
        
        <h2>SVG</h2>
        <details open="">
        <summary>Notes</summary>
            <p>It is also possible to use this library for generating `svg` elements.</p>
            <p>Some function helpers and examples can be found on repository [`$dom_svg`](https://github.com/jaandrle/dollar_dom_svg).</p>
        </details>


        <script>
            document.addEventListener("paste", function enableInScriptTags(ev){
                ev.preventDefault();
                document.execCommand('insertText', false, ev.clipboardData.getData('text/plain'));
            });
            document.addEventListener("keydown", function enableInScriptTags(ev){
                if(ev.target.tagName!=="SCRIPT"&&ev.target.tagName!=="STYLE") return false;
                const { keyCode }= ev;
                if(keyCode!==9&&keyCode!==13) return false;

                ev.preventDefault();
                document.execCommand('insertText', false, keyCode===9 ? "    " : "\n                ");
            });
            let h2_counter= 0;
            const content_ul= document.getElementsByClassName('content')[0];
            [ ...document.getElementsByTagName('h2') ].forEach(function(el){
                const textContent= el.textContent;
                if(textContent==="Content") return false;
                const id= "heading_"+h2_counter++;
                contentH2({ textContent, id }).mount(el, "replace");
                contentLI({ textContent, id }).mount(content_ul);
            });
            function contentLI({ textContent, id }){
                const href= "#"+id;
                const { add, share }= $dom.component("LI", null);
                    add("A", { textContent, href });
                return share;
            }
            function contentH2({ textContent, id }){
                const { add, share }= $dom.component("H2", { id });
                    add("A", { textContent: "⇡", href: "#heading_content" });
                    add("SPAN", { textContent: " "+textContent }, -1);
                return share;
            }
        </script>
    </article>
</body>
</html>