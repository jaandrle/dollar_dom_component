gulp_place("app._BUILD_.example_el= toELID(app._BUILD_.example_el_id++)", "eval");
gulp_place("app._BUILD_.example_onkeyup= toKeyUp(app._BUILD_.example_el)", "eval");
<p>TEST</p>
<style style="margin-bottom: -.25rem;" contenteditable="">
    #gulp_place('app._BUILD_.example_el', 'variable') svg{
        width: 15rem;
    }
</style>
<div class="output" id="gulp_place('app._BUILD_.example_el', 'variable')"></div>
<script onkeyup="gulp_place('app._BUILD_.example_onkeyup', 'variable')" contenteditable="">
(function(element_id){
    //EXAMPLE START

    const thermometer= (function(){
        const range= [ 5, 25 ];
        const { min, max }= Math;
        const /* idcka pro definice */
            gradient_id= "thermometer_gradient", 
            mask_preid= "thermometer_mask_";
        let /* uz generovane definice */
            gradient= false
            masks= [];
        let defs_el;
        return Object.freeze({
            svgComponent: function({ temperature= 25 }){
                temperature= max(range[0], min(temperature, range[1]));
                const /* create SVG defs */
                    mask_id= this.defineMask(temperature),
                    gradient_id= this.defineLinearGradient();
                const { add, component, share }= $dom.component("svg", { viewBox: `0 0 20 40`, fill: "none" });
                    component(border());
                    add("path", { 
                        fill: `url(#${gradient_id})`, mask: `url(#${mask_id})`,
                        d: "M3 30.9724C3 29.0972 3.86664 27.3558 5.33336 26.2173L6.33336 25.4136V5.67891C6.33336 4.20552 7.53336 3 9 3C10.4666 3 11.6666 4.20552 11.6666 5.67891V25.4137L12.6666 26.2174C14.1333 27.3559 15 29.0972 15 30.9725C15 34.3211 12.3334 37 9 37C5.66664 37 3 34.3211 3 30.9724Z"
                    }, -1);
                return share;

                function border(color= "#A9A9A9"){
                    return $dom.component("path", {
                        fill: color,
                        'fill-rule': "evenodd",
                        'clip-rule': "evenodd",
                        d: "M0 30.6666C0 35.8 4.04999 40 9 40C13.95 40 18 35.8 18 30.6667C18 27.8667 16.8429 25.3334 14.7857 23.5334V6C14.7857 2.66664 12.2143 0 9 0C5.7857 0 3.2143 2.66664 3.2143 6V23.5333C1.15714 25.3333 0 27.8666 0 30.6666ZM4.50004 6C4.50004 3.4 6.49286 1.33336 9 1.33336C11.5071 1.33336 13.5 3.4 13.5001 6V23.8666C13.5001 24.0666 13.6286 24.2666 13.7572 24.4C15.6215 25.9333 16.7143 28.2 16.7143 30.6666C16.7143 35.0666 13.2429 38.6666 9.00008 38.6666C4.75723 38.6666 1.28581 35.0666 1.28581 30.6666C1.28581 28.2 2.37861 25.9334 4.24292 24.4C4.43578 24.2666 4.50004 24.0666 4.50004 23.8666V6Z"
                    }, { namespace_group: "SVG" }).share;
                }
            },
            defsComponent: function(){
                    const { add, share }= $dom.component("svg", { style: "position:fixed;top:-100vh;left:-100vw;" });
                    add("defs").oninit(el=> defs_el= el);
                return share;
            },
            defineLinearGradient: function(){
                if(gradient) return gradient_id;
                if(!defs_el) this.defsComponent().mount(document.body);
                defineLinearGradient().mount(defs_el);
                gradient= true;
                return gradient_id;
            },
            defineMask: function(size){
                if(masks.indexOf(size)!==-1) return mask_preid+size;
                if(!defs_el) this.defsComponent().mount(document.body);
                defineMask({ size }).mount(defs_el);
                masks.push(size);
                return mask_preid+size;
            }
        });
        function defineLinearGradient(){
            const { add, share }= $dom.component("linearGradient", { id: gradient_id, x1: 3, y1: 3, x2: 3, y2: 37, gradientUnits: "userSpaceOnUse" }, { namespace_group: "SVG" });
                add("stop", { 'stop-color': "#D01F29" });
                add("stop", { 'stop-color': "#B2B2B2", offset: "0.507707" }, -1);
                add("stop", { 'stop-color': "#046FBC", offset: "1" }, -1);
            return share;
        }
        function defineMask({ size= 25, fill= "white" }){
            const { add, share }= $dom.component("mask", {
                id: mask_preid+size,
                'mask-type': "alpha", maskUnits: "userSpaceOnUse",
                x: 0, y: -1.65*size+43.25, /* linearni regrese */
                width: 20, height: 1.65*size-6.25 /* linearni regrese */
            }, { namespace_group: "SVG" });
                add("rect", { height: "100%", width: "100%", fill });
            return share
        }
    })();

    const container= document.getElementById(element_id);
    thermometer.defsComponent().mount(container);
    thermometer.svgComponent({ temperature: 25 }).mount(container);
    thermometer.svgComponent({ temperature: 5 }).mount(container);

    //EXAMPLE END
})("gulp_place('app._BUILD_.example_el', 'variable')");
</script>
<!-- example source links -->